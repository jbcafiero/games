<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <canvas id="canvas" width="500" height="500" style='background-color: black;margin-top: 0;padding: 0;'></canvas>
    <canvas id="ball" width="500" height="500" style='margin-top: -500px;padding: 0;'></canvas>
    <button type="button" name="button" onclick="runFunc()">Start Test</button>
    <button type="button" name="button" onclick="runRightImpulse()">Start Test</button>
  </body>
  <script src="https://jeremyckahn.github.io/keydrown/dist/keydrown.min.js">

  </script>
  <script type="text/javascript">

    var bcanv = document.getElementById('ball');
    var canv = document.getElementById('canvas');

    var ball = bcanv.getContext("2d");
    var bally = 10;
    var ballVel = 0;
    var input = false;


    function drawCircle(x, y) {

      bcanv.width = bcanv.width;
      ball.beginPath();
      ball.arc(x, y, 20, 0, 20 * Math.PI);
      ball.fillStyle = "white";
      ball.fill();

    }

    drawCircle(100, bally);

    function ballGravity() {
      function ballMult() {
        if (input == false) {
          drawCircle(100, bally)
          ballVel = ballVel + 0.098;
          bally = bally + ballVel;
        }
        else if (input == true) {
          drawCircle(100, bally)
          ballVel = ballVel - 0.01;
          bally = bally + ballVel;
        }
        if (bally > bcanv.height-20) {
          ballVel = -ballVel * 0.75

          if (ballVel < 1.3 && ballVel > -1.3) {
            ballVel = 0;
          }
          else {
            bally = bally - 6
          }
        }

      }

        var ballExecute = setInterval(ballMult, 1000/100)
    }

    function runFunc() {
      ballGravity()
    }

    function runRightImpulse() {

    }

    // function ballFly() {
    //   function ballMult() {
    //     if (input == true) {
    //       drawCircle(100, bally)
    //       ballVel = ballVel - 0.05;
    //       bally = bally + ballVel;
    //     }
    //   }
    //   var ballExecute = setInterval(ballMult, 1000/100)
    // }

    kd.W.down(function () {
    input = true;
    });

    kd.W.up(function () {
     input = false;
    });

    // This update loop is the heartbeat of Keydrown
    kd.run(function () {
      kd.tick();
    });


  </script>
</html>
